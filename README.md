# mutexer

[![travis Status](https://travis-ci.org//mh-cbon/mutexer.svg?branch=master)](https://travis-ci.org//mh-cbon/mutexer) [![Appveyor Status](https://ci.appveyor.com/api/projects/status//github/mh-cbon/mutexer?branch=master&svg=true)](https://ci.appveyor.com/projects//mh-cbon/mutexer) [![Go Report Card](https://goreportcard.com/badge/github.com/mh-cbon/mutexer)](https://goreportcard.com/report/github.com/mh-cbon/mutexer) [![GoDoc](https://godoc.org/github.com/mh-cbon/mutexer?status.svg)](http://godoc.org/github.com/mh-cbon/mutexer) [![MIT License](http://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

Package mutexer is a cli generator to generate mutexed version of a type.


# TOC
- [Install](#install)
- [Cli](#cli)
  - [Usage](#usage)
    - [$ mutexer -help](#-mutexer--help)
  - [Cli examples](#cli-examples)
- [API example](#api-example)
  - [> demo/lib.go](#-demolibgo)
  - [> demo/vegetuxed_gen.go](#-demovegetuxed_gengo)
- [Recipes](#recipes)
  - [Release the project](#release-the-project)
- [History](#history)

# Install
```sh
mkdir -p $GOPATH/src/github.com/mh-cbon/mutexer
cd $GOPATH/src/github.com/mh-cbon/mutexer
git clone https://github.com/mh-cbon/mutexer.git .
glide install
go install
```

# Cli

## Usage

#### $ mutexer -help
```sh
mutexer 0.0.0

Usage

	mutexer [out] [...types]

	out:   Output destination of the results, use '-' for stdout.
	types: A list of types such as src:dst.
	-p:	   The output package name.
```

## Cli examples

```sh
# Create a mutexed version os Tomate to MyTomate
mutexer -p demo tomate_gen.go Tomate:MyTomate
```
# API example

Following example demonstates a program using it to generate a mutexed version of a type.

#### > demo/lib.go
```go
package demo

// Tomate is about red vegetables to make famous italian food.
type Tomate struct {
	Name string
}

// GetID return the ID of the Tomate.
func (t Tomate) GetID() string {
	return t.Name
}

//go:generate lister vegetables_gen.go Tomate:Tomates
//go:generate mutexer vegetuxed_gen.go Tomates:Tomatex
```

Following code is the generated implementation of `Tomate` type.

#### > demo/vegetuxed_gen.go
```go
package demo

// file generated by
// github.com.mh-cbon/mutexer
// do not edit

import "sync"

// Tomatex mutexes a Tomates
type Tomatex struct {
	embed Tomates
	mutex *sync.Mutex
}

// NewTomatex constructs a new Tomatex
func NewTomatex() *Tomatex {
	ret := &Tomatex{}
	return ret
}

// Push is mutexed
func (t *Tomatex) Push(x ...Tomate) *Tomates {
	t.mutex.Lock()
	defer t.mutex.Unlock()
	return t.embed.Push(x...)
}

// Unshift is mutexed
func (t *Tomatex) Unshift(x ...Tomate) *Tomates {
	t.mutex.Lock()
	defer t.mutex.Unlock()
	return t.embed.Unshift(x...)
}

// Pop is mutexed
func (t *Tomatex) Pop() Tomate {
	t.mutex.Lock()
	defer t.mutex.Unlock()
	return t.embed.Pop()
}

// Shift is mutexed
func (t *Tomatex) Shift() Tomate {
	t.mutex.Lock()
	defer t.mutex.Unlock()
	return t.embed.Shift()
}

// Index is mutexed
func (t *Tomatex) Index(s Tomate) int {
	t.mutex.Lock()
	defer t.mutex.Unlock()
	return t.embed.Index(s)
}

// RemoveAt is mutexed
func (t *Tomatex) RemoveAt(i int) bool {
	t.mutex.Lock()
	defer t.mutex.Unlock()
	return t.embed.RemoveAt(i)
}

// Remove is mutexed
func (t *Tomatex) Remove(s Tomate) bool {
	t.mutex.Lock()
	defer t.mutex.Unlock()
	return t.embed.Remove(s)
}

// InsertAt is mutexed
func (t *Tomatex) InsertAt(i int, s Tomate) *Tomates {
	t.mutex.Lock()
	defer t.mutex.Unlock()
	return t.embed.InsertAt(i, s)
}

// Splice is mutexed
func (t *Tomatex) Splice(start int, length int, s ...Tomate) []Tomate {
	t.mutex.Lock()
	defer t.mutex.Unlock()
	return t.embed.Splice(start, length, s...)
}

// Slice is mutexed
func (t *Tomatex) Slice(start int, length int) []Tomate {
	t.mutex.Lock()
	defer t.mutex.Unlock()
	return t.embed.Slice(start, length)
}

// Reverse is mutexed
func (t *Tomatex) Reverse() *Tomates {
	t.mutex.Lock()
	defer t.mutex.Unlock()
	return t.embed.Reverse()
}

// Len is mutexed
func (t *Tomatex) Len() int {
	t.mutex.Lock()
	defer t.mutex.Unlock()
	return t.embed.Len()
}

// Set is mutexed
func (t *Tomatex) Set(x []Tomate) *Tomates {
	t.mutex.Lock()
	defer t.mutex.Unlock()
	return t.embed.Set(x)
}
```


# Recipes

#### Release the project

```sh
gump patch -d # check
gump patch # bump
```

# History

[CHANGELOG](CHANGELOG.md)
